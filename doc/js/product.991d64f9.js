(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["product"],{"11b4":function(t,s,o){"use strict";var n=o("ffc8"),i=o.n(n);i.a},"146f":function(t,s,o){"use strict";o.r(s);var n=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{attrs:{id:"product"}},[o("app-header"),o("div",{staticClass:"product"},[o("div",{staticClass:"container"},[o("div",{staticClass:"pro-view"},[o("div",{staticClass:"view-list"},t._l(t.goodsInfo.pics,(function(s,n){return o("img",{directives:[{name:"show",rawName:"v-show",value:n==t.showImgIndex,expression:"index == showImgIndex"}],key:"img_"+n,attrs:{src:s.pics_mid,alt:t.goodsInfo.goods_name}})})),0),o("div",{staticClass:"view-control"},[o("div",{staticClass:"control-lr"},[o("a",{staticClass:"control-prev",attrs:{href:"javascript:"},on:{click:function(s){0==t.showImgIndex?t.showImgIndex=t.goodsInfo.pics.length-1:t.showImgIndex--}}},[t._v("上一张")]),o("a",{staticClass:"control-next",attrs:{href:"javascript:"},on:{click:function(s){t.showImgIndex==t.goodsInfo.pics.length-1?t.showImgIndex=0:t.showImgIndex++}}},[t._v("下一张")])]),o("div",{staticClass:"control-page"},t._l(t.goodsInfo.pics,(function(s,n){return o("a",{key:"img_"+n,on:{click:function(s){t.showImgIndex=n}}},[t._v(t._s(n+1))])})),0)])]),o("div",{staticClass:"pro-info"},[o("h1",{staticClass:"pro-title"},[t._v(t._s(t.goodsInfo.goods_name))]),o("p",{staticClass:"pro-desc"},[t._v(t._s(t.goodsInfo.desc))]),o("div",{staticClass:"pro-price"},[o("span",[o("label",{staticClass:"price"},[t._v(t._s(t.goodsInfo.goods_price))]),t._v(" 元 ")]),o("span",[t._v(" 仅剩"),o("label",{staticClass:"price"},[t._v(t._s(t.goodsInfo.goods_number))]),t._v(" 件 ")])]),o("div",{staticClass:"pro-btn"},[o("a",{attrs:{href:"javascript:;",id:"addCart"},on:{click:t.joinCart}},[t._v("加入购物车")])])])])]),o("div",{staticClass:"introduce"},[o("div",{staticClass:"container",domProps:{innerHTML:t._s(t.goodsInfo.goods_introduce)}})]),o("app-footer")],1)},i=[],e=(o("c740"),o("13d5"),o("5530")),c=o("7c15"),r=o("a93e"),a=o("2f62"),d={created:function(){this.getGoodsInfo(),this.getUserInfo()},updated:function(){},data:function(){return{userInfo:{},goodsInfo:{},productOptions:[],imgs:[],indexActive1:0,indexActive2:0,showImgIndex:0}},computed:{optionsList:function(){return 0!=this.productOptions.length?this.productOptions[this.indexActive1].list:[]},price:function(){return 0!=this.productOptions.length?this.productOptions[this.indexActive1].list[this.indexActive2].price:""},sku_id:function(){return 0!=this.productOptions.length?this.productOptions[this.indexActive1].list[this.indexActive2].sku_id:""}},methods:Object(e["a"])({},Object(a["c"])("user",["changeTotalCartGoods"]),{getUserInfo:function(){var t=Object(r["a"])("get","userInfo");t&&(this.userInfo=t)},getGoodsInfo:function(){var t=this,s=this.$route.query.goods_id;c["a"].get("goods/detail?goods_id="+s).then((function(s){200==s.meta.status&&(t.goodsInfo=s.message,document.title=s.message.goods_name)}))},joinCart:function(){var t=this;if(this.userInfo.isLoggedIn){if(!this.goodsInfo.goods_id)return;var s=this.userInfo.cartOrder,o=s.findIndex((function(s){return s.goods_id==t.goodsInfo.goods_id}));-1==o?(this.goodsInfo.num=1,s.push(this.goodsInfo)):s[o].num+=1,this.$message({message:"添加成功",type:"success"});var n=this.userInfo.cartOrder.reduce((function(t,s){return t+s.num}),0);this.changeTotalCartGoods(n),Object(r["a"])("set","userInfo",this.userInfo)}else this.$message({message:"请先登录！",type:"warning"})}}),watch:{},components:{}},u=d,f=(o("11b4"),o("2877")),g=Object(f["a"])(u,n,i,!1,null,"354effee",null);s["default"]=g.exports},c740:function(t,s,o){"use strict";var n=o("23e7"),i=o("b727").findIndex,e=o("44d2"),c=o("ae40"),r="findIndex",a=!0,d=c(r);r in[]&&Array(1)[r]((function(){a=!1})),n({target:"Array",proto:!0,forced:a||!d},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),e(r)},ffc8:function(t,s,o){}}]);
//# sourceMappingURL=product.991d64f9.js.map